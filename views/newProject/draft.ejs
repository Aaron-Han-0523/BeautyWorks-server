<!DOCTYPE html>
<html lang="ko">

<head>
  <%- include ("../partials/header.ejs") %>
  <% const numberOfProduct=codezip.numberOfProduct; %>
  <% const country_codes=codezip.country.codes; %>
  <% let applies_print="";
  codezip.effects.use.boolean.forEach((item,index) => {
    applies_print += " " + __("use_effects."+item+".false") + ",";
  })%>
</head>

<body class="layout-boxed">

  <%- include ("../partials/loader.ejs") %>

  <%- include ("../partials/client-nav.ejs") %>
  <%- include ("../partials/chatMark.ejs") %>

  <!--  BEGIN MAIN CONTAINER  -->
  <div class="main-container" id="container">

    <div class="overlay"></div>
    <div class="search-overlay"></div>

    <%- include ("../partials/client-sidebar.ejs") %>

    <!--  BEGIN CONTENT AREA  -->
    <div id="content" class="main-content">
      <div class="layout-px-spacing">

        <div class="middle-content  p-0">

          <!-- BREADCRUMB -->
          <div class="row px-3">
            <div class="breadcrumb align-items-end d-flex pt-3 br-20">
              <div class="p-1 col-3">
                <h6 class="main-menu">
                  <%= __('Project') %>
                </h6>
                <h4><strong>
                    <%= __('New Project') %>
                  </strong></h4>
              </div>
            </div>
          </div>

          <!-- CONTENT AREA -->
          <div class="row">
            <div class="col-xl-12 col-lg-12 col-sm-12  layout-spacing">

              <div class="widget-content widget-content-area br-20 py-5">

                <form id="draft" method="post" enctype="multipart/form-data">
                  <div class="form-group ms-3 text-break">
                    <div class="row mb-3">
                      <h5 class="p-0"><strong>
                          <%= __('샘플의뢰서 초안') %>
                        </strong>
                      </h5>
                    </div>
                    <div class="row widget" style="padding:5% 10%">

                      <!-- 제품명 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.project_name') %><span style="color: red;">*</span>
                          </h6>
                        </div>
                        <div class="col">
                          <input class="form-control" name="project_name" id="project_name" placeholder="<%= __('plzInputText') %>" required>
                        </div>
                      </div>


                      <!-- 브랜드명 입력 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.brand_name') %><span style="color: red;">*</span>
                          </h6>
                        </div>
                        <div class="col">
                          <input type="text" class="form-control" name="brand_name" placeholder="<%= __('plzInputText') %>" required value="<%= user.brand_name %>">
                        </div>
                      </div>


                      <!-- 카테고리 선택 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.category1') %><span style="color: red;">*</span>
                          </h6>
                        </div>
                        <div class="col">
                          <input hidden type="text" name="category1" required>
                          <input type="text" class="form-control" id="category1_print" placeholder="<%= __('plzSelectText') %>" readonly required>
                        </div>
                        <div class="col col-2">
                          <button class="form-select text-center" type="button" id="select_category1" data-bs-toggle="dropdown" aria-expanded="false">
                            <%= __('select') %>
                          </button>
                          <ul class="dropdown-menu scrollable-menu" aria-labelledby="select_category1">
                            <% for(let i=0; i< numberOfProduct.category1; i++) { %>
                            <li>
                              <a class="dropdown-item" href="javascript:void(0);" onclick="select_category1_func('<%= i %>','<%= __(`product`+i) %>');">
                                <%= __('product'+i) %>
                              </a>
                            </li>
                            <% } %>
                          </ul>
                        </div>
                      </div>


                      <!-- 품목 선택 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.category2') %><span style="color: red;">*</span>
                          </h6>
                        </div>
                        <div class="col">
                          <input hidden type="text" name="category2" required>
                          <input type="text" class="form-control" id="category2_print" placeholder="<%= __('plzSelectText') %>" readonly required>
                        </div>
                        <div class="col col-2">
                          <button class="form-select text-center" type="button" id="select_category2" data-bs-toggle="dropdown" aria-expanded="false">
                            <%= __('select') %>
                          </button>
                          <ul id="category2_list" class="dropdown-menu scrollable-menu" aria-labelledby="select_category2">
                            <li>
                              <%= __('users.newProject.basic.msg.먼저 카테고리를 선택해주세요.') %>
                            </li>
                          </ul>
                        </div>
                      </div>


                      <!-- 용량 선택 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.capacity') %><span style="color: red;">*</span>
                          </h6>
                        </div>
                        <div class="col">
                          <input type="text" class="form-control" name="capacity" id="capacity" placeholder="<%= __('plzInputText') %>" required>
                        </div>
                      </div>


                      <!-- 대상연령 입력 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.target_age') %><span style="color: red;">*</span>
                          </h6>
                        </div>
                        <div class="col">
                          <input hidden type="text" name="target_age" required>
                          <input type="text" class="form-control" id="target_age_print" placeholder="<%= __('plzSelectText') %>" readonly required>
                        </div>
                        <div class="col col-2">
                          <button class="form-select text-center" type="button" id="select_age" data-bs-toggle="dropdown" aria-expanded="false">
                            <%= __('select') %>
                          </button>
                          <ul class="dropdown-menu" aria-labelledby="select_age">
                            <% for(let i=0; i< 8; i++) { %>
                            <li class="me-3 d-flex">
                              <label class="dropdown-item form-check-label target_ageLabel" for="age<%= i %>">
                                <%= __('age'+i) %>
                              </label>
                              <input class="form-check-input age" type="checkbox" id="age<%= i %>">
                            </li>
                            <% } %>
                          </ul>
                        </div>
                      </div>


                      <!-- 성별 입력 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.target_gender') %><span style="color: red;">*</span>
                          </h6>
                        </div>
                        <div class="col">
                          <input hidden type="text" name="target_gender" required>
                          <input type="text" class="form-control" id="target_gender_print" placeholder="<%= __('plzSelectText') %>" readonly required>
                        </div>
                        <div class="col col-2">
                          <button class="form-select text-center" type="button" id="select_gender" data-bs-toggle="dropdown" aria-expanded="false">
                            <%= __('select') %>
                          </button>
                          <ul class="dropdown-menu" aria-labelledby="select_gender">
                            <% for(let i=0; i< 2; i++) { %>
                            <li class="me-3 d-flex">
                              <label class="dropdown-item form-check-label target_genderLabel" for="gender<%= i %>">
                                <%= __('gender'+i) %>
                              </label>
                              <input class="form-check-input gender" type="checkbox" id="gender<%= i %>">
                            </li>
                            <% } %>
                          </ul>
                        </div>
                      </div>


                      <!-- 판매국가 입력 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.target_country') %>
                            <span style="color: red;">*</span>
                          </h6>
                        </div>
                        <div class="col">
                          <input hidden type="text" name="target_country" value="">
                          <input type="text" class="form-control" id="target_country_print" placeholder="<%= __('plzSelectText') %>" readonly required>
                        </div>
                        <div class="col col-2">
                          <button class="form-select text-center" type="button" id="select_country" data-bs-toggle="dropdown" aria-expanded="false">
                            <%= __('select') %>
                          </button>
                          <ul class="dropdown-menu scrollable-menu" aria-labelledby="select_country">
                            <% for(let i=0; i< country_codes.length; i++) { %>
                            <li class="me-3 dropdown-item">
                              <div class="d-flex">
                                <img class="me-2" src="/images/flag/<%= country_codes[i] %>.png">
                                <label class="form-check-label flex-grow-1 target_countryLabel" for="country<%= i %>">
                                  <%= __(country_codes[i]) %>
                                </label>
                                <input class="form-check-input country" type="checkbox" id="country<%= i %>">
                              </div>
                            </li>
                            <% } %>
                          </ul>
                        </div>
                      </div>


                      <!-- 유통채널 입력 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.distribution_channel') %>
                          </h6>
                        </div>
                        <div class="col">
                          <input type="text" class="form-control" name="distribution_channel" id="distribution_channel" placeholder="<%= __('plzInputText') %>">
                        </div>
                      </div>


                      <!-- 해외 인증 여부 입력 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.overseas_certifications') %>
                          </h6>
                        </div>
                        <div class="col">
                          <input type="text" class="form-control" name="overseas_certifications" id="overseas_certifications" placeholder="<%= __('plzInputText') %>">
                        </div>
                      </div>


                      <!-- 한국 기능성 인증 진행 여부 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.korea_certification') %>
                          </h6>
                        </div>
                        <div class="col d-flex align-items-baseline">
                          <input type="radio" class="btn-check" name="korea_certification" id="korea_certification_true" autocomplete="off" value="1">
                          <label class="col btn btn-outline-primary my-0 me-4" for="korea_certification_true">
                            <%= __('users.newProject.basic.btn.yes') %>
                          </label>

                          <input type="radio" class="btn-check" name="korea_certification" id="korea_certification_false" autocomplete="off" value="" checked>
                          <label class="col btn btn-outline-primary my-0" for="korea_certification_false">
                            <%= __('users.newProject.basic.btn.no') %>
                          </label>
                          <div class="col"></div>
                        </div>
                      </div>


                      <!-- 부자재 입고 유무 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.basic.sourcing_of_packaging') %>
                          </h6>
                        </div>
                        <div class="col d-flex align-items-baseline">
                          <input type="radio" class="btn-check" name="sourcing_of_packaging" id="sourcing_of_packaging_true" autocomplete="off" value="1">
                          <label class="col btn btn-outline-primary my-0 me-4" for="sourcing_of_packaging_true">
                            <%= __('users.newProject.basic.sourcing_of_packaging.btn.yes') %>
                          </label>

                          <input type="radio" class="btn-check" name="sourcing_of_packaging" id="sourcing_of_packaging_false" autocomplete="off" value="" checked>
                          <label class="col btn btn-outline-primary my-0" for="sourcing_of_packaging_false">
                            <%= __('users.newProject.basic.sourcing_of_packaging.btn.no') %>
                          </label>
                          <div class="col"></div>
                        </div>
                      </div>


                      <!-- 제품 효과 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.option.efficacy') %>
                          </h6>
                        </div>
                        <div class="col col-6">
                          <input hidden type="text" name="efficacy" required>
                          <button class="form-select text-start" type="button" id="efficacy_print" data-bs-toggle="offcanvas" data-bs-target="#select_efficacy" aria-controls="select_efficacy">
                            <%= __('plzSelectText') %>
                          </button>
                          <!-- 제품효과 모달창 -->
                          <div class="offcanvas br-15" id="select_efficacy" data-bs-scroll="true" data-bs-backdrop="true" style="width: 50vw; left:5vw">
                            <div class="offcanvas-header mt-2">
                              <div></div>
                              <h1 class="offcanvas-title fs-5">
                                <%= __('users.newProject.option.efficacy') %>
                              </h1>
                              <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
                            </div>
                            <div class="offcanvas-body mx-5">
                              <!-- 일반 제품효과 -->
                              <div class="row">
                                <% for(let i=0; i< codezip.effects.product.length; i++) { %>
                                <div class="col d-flex dropdown-item">
                                  <input class="efficacy form-check-input bg-darkgray br-circle mx-1" type="checkbox" id="efficacy<%= i %>">
                                  <label for="efficacy<%= i %>" class="efficacyLabel flex-fill h5">
                                    <%= __(codezip.effects.product[i])%>
                                  </label>
                                </div>
                                <% if(i%2==1){ %>
                                <div class="my-1"></div>
                                <% } %>
                                <% } %>
                              </div>
                              <!-- 선케어 제품효과-->
                              <div class="row">
                                <% for(let i=0; i< codezip.effects.suncare.length; i++) { %>
                                <div class="col d-flex dropdown-item">
                                  <input class="efficacy form-check-input bg-darkgray br-circle mx-1" type="checkbox" id="suncareEffects<%= i %>">
                                  <label for="suncareEffects<%= i %>" class="efficacyLabel flex-fill h5">
                                    <%=__(codezip.effects.suncare[i])%>
                                  </label>
                                </div>
                                <% if(i%2==1){ %>
                                <div class="my-1"></div>
                                <% } %>
                                <% } %>
                              </div>
                              <!-- 기타 -->
                              <div class="row">
                                <div class="col d-flex dropdown-item">
                                  <input class="etc_efficacy form-check-input bg-darkgray br-circle mx-1" type="checkbox" id="etc_efficacy_check">
                                  <label for="etc_efficacy_check" class="flex-fill h5">
                                    <%= __("기타")%>
                                  </label>
                                </div>
                              </div>

                            </div>
                            <div class="offcanvas-footer text-center my-3">
                              <button type="button" class="btn-outline-gray bg-gray br-15 p-3 px-5" data-bs-dismiss="offcanvas">
                                <%= __('users.newProject.option.btn.확인') %>
                              </button>
                            </div>
                          </div>
                        </div>
                        <div class="col">
                          <input hidden type="text" class="form-control" name="etc_efficacy" placeholder="<%= __('plzInputText') %>" required>
                        </div>
                      </div>


                      <!-- 컨셉성분 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.option.ingredients') %>
                          </h6>
                        </div>
                        <div class="col col">
                          <input hidden type="text" name="ingredients" required>
                          <button class="form-select text-start" type="button" id="ingredients_print" data-bs-toggle="offcanvas" data-bs-target="#select_ingredients" aria-controls="select_ingredients">
                            <%= __('plzSelectText') %>
                          </button>
                          <!-- 컨셉성분 모달창 -->
                          <div class="offcanvas br-15 bg-white" style="border: 1px solid; width: 100%; left:3%;" id="select_ingredients" data-bs-scroll="true" data-bs-backdrop="true">
                            <div class="offcanvas-header justify-content-end pb-0">
                              <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
                            </div>
                            <div class="offcanvas-body mx-5 mt-0 pt-0" style="border-top:0px;">
                              <form method="get" action="/users/ingdient/search">
                                <!-- 통합 검색-->
                                <div class="w-100">
                                  <div class="d-flex px-5">
                                    <label class="col-3 h5 align-self-center mb-0">
                                      <strong>
                                        <%= __('통합 검색') %>
                                      </strong>
                                    </label>
                                    <input name="q" class="form-control" placeholder="<%= __('plzInputText') %>">
                                  </div>
                                </div>
                                <!-- 종류/기능 검색-->
                                <div class="row mt-3">
                                  <div class="col row">
                                    <div class="d-flex px-5">
                                      <label class="col-3 h5 align-self-center mb-0">
                                        <strong>
                                          <%= __('ingredients.종류') %>
                                        </strong>
                                      </label>
                                      <input hidden name="type">
                                      <!-- 컨셉성분 종류 -->
                                      <button class="form-select text-start" type="button" id="select_type" data-bs-toggle="dropdown" aria-expanded="false">
                                        <%= __('plzSelectText') %>
                                      </button>
                                      <ul class="dropdown-menu" aria-labelledby="select_type">
                                        <% for(let i=0; i< codezip.ingredient_type.length; i++) { %>
                                        <li class="me-3 d-flex">
                                          <label class="dropdown-item form-check-label ingredient_type-label" for="ingredient_type<%= i %>">
                                            <%= __(codezip.ingredient_type[i]) %>
                                          </label>
                                          <input class="form-check-input ingredient_type" type="checkbox" id="ingredient_type<%= i %>">
                                        </li>
                                        <% } %>
                                      </ul>
                                    </div>
                                  </div>
                                  <div class="col row">
                                    <div class="d-flex px-5">
                                      <label class="col-3 h5 align-self-center mb-0">
                                        <strong>
                                          <%= __('ingredients.기능') %>
                                        </strong>
                                      </label>
                                      <input hidden name="effects">
                                      <!-- 컨셉성분 기능 -->
                                      <button class="form-select text-start" type="button" id="select_effects" data-bs-toggle="dropdown" aria-expanded="false">
                                        <%= __('plzSelectText') %>
                                      </button>
                                      <ul class="dropdown-menu" aria-labelledby="select_effects">
                                        <% for(let i=0; i< codezip.effects.ingredient.length; i++) { %>
                                        <li class="me-3 d-flex">
                                          <label class="dropdown-item form-check-label ingredient_effects-label" for="ingredient_effects<%= i %>">
                                            <%= __(codezip.effects.ingredient[i]) %>
                                          </label>
                                          <input class="form-check-input ingredient_effects" type="checkbox" id="ingredient_effects<%= i %>">
                                        </li>
                                        <% } %>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                              </form>
                              <!-- 결과 테이블 -->
                              <div class="table-responsive mt-4 pt-4">
                                <table style="border: 1px solid var(--bs-gray-500);" class="table table-no-space table-bordered table-hover text-break  br-15 text-center">
                                  <thead class="">
                                    <th>
                                      <%= __('ingredients.성분명') %>
                                    </th>
                                    <th>
                                      <%= __('ingredients.종류') %>
                                    </th>
                                    <th>
                                      <%= __('ingredients.기능') %>
                                    </th>
                                    <th>
                                      <%= __('ingredients.특징') %>
                                    </th>
                                    <th>
                                      <%= __('선택') %>
                                    </th>
                                  </thead>
                                  <tbody class="table-group-divider bbr-15">
                                    <tr>
                                      <td>1</td>
                                      <td>2</td>
                                      <td>3</td>
                                      <td>4</td>
                                      <td hidden>1</td>
                                      <td><input type="checkbox" class="form-check-input" id="">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>1</td>
                                      <td>2</td>
                                      <td>3</td>
                                      <td>4</td>
                                      <td hidden>1</td>
                                      <td><input type="checkbox" class="form-check-input" id="">
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>


                      <!-- 제형 선택 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.option.viscosity') %>
                          </h6>
                        </div>
                        <div class="col">
                          <select class="form-select" name="viscosity">
                            <option value="">
                              <%= __('plzSelectText') %>
                            </option>
                            <% codezip.viscosity.forEach((item,index)=>{ %>
                            <option value="<%= item.slice(0,-1) %>">
                              <%= item %>
                            </option>
                            <% }) %>
                          </select>
                        </div>
                      </div>


                      <!-- 사용감 입력 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.option.applies') %>
                          </h6>
                        </div>
                        <div class="col">
                          <input hidden type="text" name="applies" required>
                          <button class="form-select text-start" type="button" id="applies_print" data-bs-toggle="offcanvas" data-bs-target="#select_applies" aria-controls="select_applies">
                            <%= applies_print.slice(0, -1) %>
                          </button>
                          <!-- 사용감 모달창 -->
                          <div class="offcanvas br-15" id="select_applies" data-bs-scroll="true" data-bs-backdrop="true">
                            <div class="offcanvas-header mt-2">
                              <div></div>
                              <h1 class="offcanvas-title fs-5">
                                <%= __('users.newProject.option.applies') %>
                              </h1>
                              <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
                            </div>
                            <div class="offcanvas-body mx-5">
                              <div>
                                <% codezip.effects.use.boolean.forEach((item,index)=>{ %>
                                <div class="row pt-3 pb-2" style="border-bottom: 1px solid #bfc9d4;">
                                  <div class="col-4">
                                    <h5>
                                      <%= __("use_effects."+item) %>
                                    </h5>
                                  </div>
                                  <div class="col-8 row">
                                    <div class="col d-flex dropdown-item">
                                      <input class="applies_bool form-check-input bg-darkgray br-circle mx-1" type="checkbox" id="applies-<%= index %>-1">
                                      <label for="applies-<%= index %>-1" class="flex-fill applies_bool-label">
                                        <h5>
                                          <%= __("use_effects."+item+".true") %>
                                        </h5>
                                      </label>
                                    </div>
                                    <div class="col d-flex dropdown-item">
                                      <input class="applies_bool form-check-input bg-darkgray br-circle mx-1" type="checkbox" id="applies-<%= index %>-0" checked>
                                      <label for="applies-<%= index %>-0" class="flex-fill applies_bool-label">
                                        <h5>
                                          <%= __("use_effects."+item+".false") %>
                                        </h5>
                                      </label>
                                    </div>
                                  </div>
                                </div>
                                <% }) %>
                              </div>
                              <!-- Other effects -->
                              <div class="row mt-3">
                                <div class="col-4">
                                  <h5>
                                    <%= __("use_effects.OtherEffects")
                                                                                        %>
                                  </h5>
                                  <h6 style="color: red;">
                                    <%= __("use_effects.중복선택가능") %>
                                  </h6>
                                </div>
                                <div class="col-8 row">
                                  <% for(let i=0; i<
                                                                                    codezip.effects.use.other; i++){ %>
                                  <div class="col d-flex dropdown-item">
                                    <input class="applies_other form-check-input bg-darkgray br-circle mx-1" type="checkbox" id="applies-<%= codezip.effects.use.boolean.length +i %>">
                                    <label for="applies-<%= codezip.effects.use.boolean.length +i %>" class="applies_other-label flex-fill">
                                      <h5>
                                        <%= __("use_effects."+i)
                                                                                                    %>
                                      </h5>
                                    </label>
                                  </div>
                                  <% if(i%2==1){ %>
                                  <div></div>
                                  <% } %>
                                  <% } %>
                                </div>
                              </div>
                            </div>
                            <div class="offcanvas-footer text-center my-3">
                              <button type="button" class="btn-outline-gray bg-gray br-15 p-3 px-5" data-bs-dismiss="offcanvas">
                                <%= __('users.newProject.option.btn.확인') %>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>


                      <!-- 색상 입력 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.option.color') %>
                          </h6>
                        </div>
                        <div class="col">
                          <input type="text" class="form-control" name="color" id="color" placeholder="<%= __('plzInputText') %>">
                        </div>
                        <!-- <div class="col" style="color: red;">
                          <%= __("변경을 원할 시 기입해주세요.") %>
                        </div> -->
                      </div>


                      <!-- 향 입력 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.option.fragrance') %>
                          </h6>
                        </div>
                        <div class="col">
                          <input type="text" class="form-control" name="fragrance" id="fragrance" placeholder="<%= __('plzInputText') %>">
                        </div>
                        <!-- <div class="col" style="color: red;">
                          <%= __("변경을 원할 시 기입해주세요.") %>
                        </div> -->
                      </div>


                      <!-- 추가사항 입력 -->
                      <div class="row mb-5 align-items-center">
                        <div class="col col-3">
                          <h6>
                            <%= __('users.newProject.option.etc') %>
                          </h6>
                        </div>
                        <div class="col">
                          <input type="text" class="form-control" name="etc" id="etc" placeholder="<%= __('plzInputText') %>">
                        </div>
                      </div>

                      <hr>

                      <div class="d-flex mt-3 justify-content-center">
                        <button id="saveBtn" class="btn btn-outline-primary col-2 mx-4 p-3 br-15" type="button" onclick="edit();">
                          <%= __('users.newProject.draft.btn.수정') %>
                        </button>
                        <button id="nextBtn" class="btn btn-outline-primary col-2 mx-4 p-3 br-15" type="button" data-bs-toggle="modal" data-bs-target="#confirmModal">
                          <%= __('users.newProject.draft.btn.완료') %>
                        </button>
                      </div>

                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
    <!--  END CONTENT AREA  -->

    <!-- confirm modal -->
    <div class="modal fade" id="confirmModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered" style="max-width: 80%; width: 50%;">
        <div class="modal-content bg-gray py-5 px-3">
          <div class="h4 text-center">
            <%= __('users.newProject.draft.msg.confirm') %>
          </div>
          <div class="mt-5 text-center">
            <button type="button" class="btn btn-outline-gray bg-white mx-5 py-3 px-5 br-15" onclick="next();">
              <%= __('users.newProject.draft.btn.확인') %>
            </button>
            <button type="button" class="btn btn-outline-gray bg-white mx-5 py-3 px-5 br-15" data-bs-dismiss="modal">
              <%= __('cancel') %>
            </button>
          </div>
        </div>
      </div>
    </div>
    <%- include ("../partials/footer.ejs") %>

  </div>
  <!-- END MAIN CONTAINER -->

  <%- include ("../partials/commonScrpits.ejs") %>

  <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM SCRIPTS -->
  <div>
    <% let category2_name_list={} %>
    <% for (let i=0; i < numberOfProduct.category1; i++) { %>
    <% category2_name_list[i]={}; %>
    <% for (let j=0; j < numberOfProduct.category2[i]; j++) { %>
    <% category2_name_list[i][j]=__('product'+i+'.'+j); %>
    <% } } %>
  </div>
  <script>
    // 옵션 JS
    const option = document.forms[0];
    const effects = JSON.parse('<%- JSON.stringify(codezip.effects) %>');

    etc_efficacy_check.addEventListener('change', (event) => {
      if (event.target.checked) {
        option['etc_efficacy'].hidden = false;
      } else {
        option['etc_efficacy'].hidden = true;
      }
    })

    // 제품 효과 추가/제거
    document.forms[0].getElementsByClassName('efficacy').forEach((item, index) => {
      item.addEventListener("change", (e) => {
        const obj = option['efficacy'];
        const code = effects.product[index] + ',';
        let value = obj.value;
        let text = document.getElementsByClassName('efficacyLabel')[index].innerText.trim();
        text = " " + text + ",";
        const print_place = efficacy_print;


        if (value) print_place.innerHTML += ",";
        else print_place.innerHTML = "";

        if (e.target.checked) {
          print_place.innerHTML += text;
          obj.value += code;
        } else {
          print_place.innerHTML = print_place.innerHTML.replace(text, "");
          obj.value = obj.value.replace(code, '');
        }
        print_place.innerHTML = print_place.innerHTML.slice(0, -1);
        if (!obj.value) print_place.innerHTML = "<%= __('plzSelectText') %>"
      })
    })

    // 사용감 추가/제거 1
    document.forms[0].getElementsByClassName('applies_bool').forEach((item, index) => {
      item.addEventListener("change", (e) => {
        const obj = option['applies'];
        let value = +obj.value;
        let text = document.getElementsByClassName('applies_bool-label')[index].innerText.trim();
        text = " " + text + ",";
        const print_place = applies_print;
        const code = 1 << parseInt(index / 2);

        let info = item.id.split('-');
        let item_bool = parseInt(info.pop())
        info.push(item_bool ? '0' : '1');
        const opposition = document.getElementById(info.join('-'));
        let opposition_index = parseInt(info.pop()) ? index - 1 : index + 1;
        let opposition_text = document.getElementsByClassName('applies_bool-label')[opposition_index].innerText.trim();
        opposition_text = " " + opposition_text + ",";

        // console.log(opposition_text);

        print_place.innerHTML += ",";

        if (e.target.checked) {
          opposition.checked = false;
          print_place.innerHTML += text;
          print_place.innerHTML = print_place.innerHTML.replace(opposition_text, "");
          obj.value = item_bool ? value | code : value & code;
        } else {
          opposition.checked = true;
          print_place.innerHTML += opposition_text;
          print_place.innerHTML = print_place.innerHTML.replace(text, "");
          obj.value = item_bool ? value & code : value | code;
        }

        // console.log(obj.value);

        print_place.innerHTML = print_place.innerHTML.slice(0, -1);
        // if (!+obj.value) print_place.innerHTML = "<%= __('plzSelectText') %>"
      })
    })

    // 사용감 추가/제거 2
    document.forms[0].getElementsByClassName('applies_other').forEach((item, index) => {
      item.addEventListener("change", (e) => {
        const obj = option['applies'];
        const code = 1 << effects.use.boolean.length + index;
        let value = +obj.value;
        let text = document.getElementsByClassName('applies_other-label')[index].innerText.trim();
        text = " " + text + ",";
        const print_place = applies_print;


        print_place.innerHTML += ",";

        if (e.target.checked) {
          print_place.innerHTML += text;
          obj.value = value + code;
        } else {
          print_place.innerHTML = print_place.innerHTML.replace(text, "");
          obj.value = value - code;
        }

        // console.log(obj.value);

        print_place.innerHTML = print_place.innerHTML.slice(0, -1);
        // if (!+obj.value) print_place.innerHTML = "<%= __('plzSelectText') %>"
      })
    })

    document.forms[0].getElementsByClassName('...').forEach((item, index) => {
      item.addEventListener("change", (e) => {

      })
    })

    // 기본 JS
    const numberOfProduct = JSON.parse('<%- JSON.stringify(numberOfProduct) %>');
    // console.log(numberOfProduct);
    const category2_name_list = JSON.parse('<%- JSON.stringify(category2_name_list) %>');
    // console.log(category2_name_list);
    const country_codes = JSON.parse('<%- JSON.stringify(country_codes) %>');
    // console.log(country_codes);

    function select_category1_func(value, printName) {
      // console.log("v:", value, "p", printName);
      document.forms[0]['category1'].value = value;
      category1_print.value = printName;
      let temp_html = "";
      let category2_n = numberOfProduct.category2[value];
      for (let i = 0; i < category2_n; i++) {
        temp_html += `<li>
                            <a class="dropdown-item" href="javascript:void(0);"
                              onclick="select_category2_func('${i}','${category2_name_list[value][i]}');">
                              ${category2_name_list[value][i]}
                            </a>
                          </li>`
      }
      category2_list.innerHTML = temp_html;
      checkValues();
    }

    function select_category2_func(value, printName) {
      // console.log("v:", value, "p", printName);
      document.forms[0]["category2"].value = value;
      category2_print.value = printName;
      checkValues();
    }

    HTMLCollection.prototype.forEach = Array.prototype.forEach;
    document.forms[0].getElementsByClassName('age').forEach((item, index) => {
      item.addEventListener("change", (e) => {
        const obj = document.forms[0]['target_age'];
        let value = +obj.value;
        let text = document.getElementsByClassName('target_ageLabel')[index].innerText.trim();
        text = " " + text + ",";
        const print_place = target_age_print;
        if (value) print_place.value += ",";

        if (e.target.checked) {
          print_place.value += text;
          value += 1 << index;
          obj.value = value;
          // console.log(obj.value);
        } else {
          let temp_text = print_place.value;
          print_place.value = temp_text.replace(text, "");
          value -= 1 << index;
          obj.value = value || '';
          // console.log(obj.value);
        }
        print_place.value = print_place.value.slice(0, -1);
        checkValues();
      })
    })

    document.forms[0].getElementsByClassName('gender').forEach((item, index) => {
      item.addEventListener("change", (e) => {
        const obj = document.forms[0]['target_gender'];
        let value = +obj.value;
        let text = document.getElementsByClassName('target_genderLabel')[index].innerText.trim();
        text = " " + text + ",";
        const print_place = target_gender_print;
        if (value) print_place.value += ",";

        if (e.target.checked) {
          print_place.value += text;
          value += 1 << index;
          obj.value = value;
          // console.log(obj.value);
        } else {
          let temp_text = print_place.value;
          print_place.value = temp_text.replace(text, "");
          value -= 1 << index;
          obj.value = value || '';
          // console.log(obj.value);
        }
        print_place.value = print_place.value.slice(0, -1);
        checkValues();
      })
    })

    document.forms[0].getElementsByClassName('country').forEach((item, index) => {
      item.addEventListener("change", (e) => {
        const obj = document.forms[0]['target_country'];
        let code = country_codes[index] + ',';
        let text = document.getElementsByClassName('target_countryLabel')[index].innerText.trim();
        text = " " + text + ",";
        const print_place = target_country_print;
        // console.log(Object.keys(value));
        if (obj.value) print_place.value += ",";

        if (e.target.checked) {
          print_place.value += text;
          obj.value += code;
          // console.log(obj.value);
        } else {
          let temp_text = print_place.value;
          print_place.value = temp_text.replace(text, "");
          obj.value = obj.value.replace(code, '');
          // console.log(obj.value);
        }
        print_place.value = print_place.value.slice(0, -1);
        checkValues();
      })
    })

    function checkValues() {
      let formData = new FormData(basic);
      let cnt = 0;
      let checkReady = false;

      for ([name, value] of formData) {
        // console.log(name, Boolean(value));

        if (!value) break;
        cnt += 1;
        if (cnt > 7) {
          checkReady = true;
          break;
        }
      }

      if (checkReady) {
        saveBtn.hidden = true;
        nextBtn.hidden = false;
      } else {
        saveBtn.hidden = false;
        nextBtn.hidden = true;
      }
    }

    document.forms[0].addEventListener('input', (e) => {
      checkValues();
    })

    function edit() {
      fetch(basic.action, {
        method: "post",
        body: new URLSearchParams(new FormData(basic))
      }).then(res => {
        if (res.ok) {
          return alert("<%= __('users.msg.SuccessSave') %>");
        } else return alert("<%= __('users.msg.FailSave') %>");
      })
    }

    function next() {

      // UI 확인용
      location.replace('<%= codezip.url.users.newProject._5 %>');
      return;

      fetch(basic.action, {
        method: "post",
        body: new URLSearchParams(new FormData(basic))
      }).then(res => {
        if (res.ok) {
          alert("<%= __('users.msg.SuccessSave') %>");
          window.location.href = res.url;
          return;
        } else return alert("<%= __('users.msg.FailSave') %>");
      })
    }
  </script>
  <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM SCRIPTS -->
</body>

</html>